<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installing the NIST scan framework &mdash; NIST Scan Framework For ARTIQ 2.0.1 documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Creating scan experiments" href="scans.html" />
    <link rel="prev" title="Introduction" href="introduction.html" /> 
<script async type="text/javascript" id="_fed_an_ua_tag" src="https://dap.digitalgov.gov/Universal-Federated-Analytics-Min.js?agency=NIST&subagency=github&pua=UA-66610693-1&yt=true&exts=ppsx,pps,f90,sch,rtf,wrl,txz,m1v,xlsm,msi,xsd,f,tif,eps,mpg,xml,pl,xlt,c">
</script>
  <link rel="stylesheet" href="https://pages.nist.gov/nist-header-footer/css/nist-combined.css">  
  <script src="https://pages.nist.gov/nist-header-footer/js/nist-header-footer.js" type="text/javascript" defer="defer"></script>
  <!--<script type="text/javascript" src="https://pages.nist.gov/leaveNotice/js/jquery.leaveNotice-nist.min.js"></script>-->
  <link rel="stylesheet" type="text/css" href="https://pages.nist.gov/leaveNotice/css/jquery.leaveNotice.css" />  
  <script type="text/javascript">
	  function link_is_external(link_element) {
	      return (link_element.host !== window.location.host);
	  }
	  (function ($) {
	      $.fn.leaveNotice = function (opt) {
	          var defaults = {
	              siteName: "NIST",
	              exitMessage:
	                  "<h2><strong>Thank you for visiting {SITENAME}.</strong></h2><p>We hope your visit was informative.</p><p>We have provided this link to a non-NIST site because it has information that may be of interest to our users. NIST does not necessarily endorse the views expressed or the facts presented on this site. Further, NIST does not endorse any commercial products that may be advertised or available on this site.</p>",
	              preLinkMessage: "<div class='setoff'><p>You will now be directed to:<br/>{URL}</p></div>",
	              linkString: "",
	              newWindow: false,
	              timeOut: 1e4,
	              overlayId: "ln-blackout",
	              messageBoxId: "ln-messageBox",
	              messageHolderId: "ln-messageHolder",
	              linkId: "ln-link",
	              displayUrlLength: 50,
	              overlayAlpha: 0.3,
	          };
	          var options = $.extend(defaults, opt);
	          return this.each(function () {
				  if(link_is_external(this)) {
		              el = $(this);
					  $(this).unbind();
		              var url = el.attr("href");
		              var ulen = options.displayUrlLength;
		              if (url.length >= ulen) {
		                  var suffix = "...";
		              } else {
		                  var suffix = "";
		              }
		              var shortUrl = url.substr(0, ulen) + suffix;
		              var title = el.attr("title");
		              if (title === undefined || title == "") {
		                  var linkText = shortUrl;
		              } else {
		                  var linkText = title;
		              }
		              options.timeOut = options.newWindow ? 0 : options.timeOut;
		              el.click(function (event) {
						  event.preventDefault();
		                  $("body").append('<div id="' + options.overlayId + '"></div>');
		                  $("body").append('<div id="' + options.messageHolderId + '"><div id="' + options.messageBoxId + '"></div></div>');
		                  if (options.overlayAlpha !== false) {
		                      $("#" + options.overlayId).css("opacity", options.overlayAlpha);
		                  }
		                  preFilteredContent = options.exitMessage + options.preLinkMessage;
		                  msgContent = preFilteredContent.replace(/\{URL\}/g, '<a id="' + options.linkId + '" href="' + url + '" title="' + url + '"' + options.linkString + ">" + linkText + "</a>");
		                  msgContent = msgContent.replace(/\{SITENAME\}/g, options.siteName);
		                  if (options.timeOut > 0) {
		                      msgContent += '<p id="ln-cancelMessage"><a href="#close" id="ln-cancelLink">Cancel</a> or press the ESC key.</p>';
		                  } else {
		                      msgContent += '<p id="ln-cancelMessage">Click the link above to continue or <a href="#close" id="ln-cancelLink">Cancel</a></p>';
		                  }
		                  $("#" + options.messageBoxId).append(msgContent);
		                  if (options.timeOut > 0) {
		                      leaveIn = setTimeout(function () {
		                          $("#ln-cancelMessage").html("<em>Loading...</em>");
		                          window.location.href = url;
		                      }, options.timeOut);
		                  } else {
		                      leaveIn = false;
		                  }
		                  if (options.newWindow) {
		                      $("a#" + options.linkId)
		                          .attr("target", "_blank")
		                          .click(function () {
		                              closeDialog(options, leaveIn);
		                          });
		                  }
		                  $("#ln-cancelLink").click(function () {
		                      closeDialog(options, leaveIn);
		                      return false;
		                  });
		                  $(document).bind("keyup", function (e) {
		                      if (e.which == 27) {
		                          closeDialog(options, leaveIn);
		                      }
		                  });
		                  $(window).unload(function () {
		                      closeDialog(options, leaveIn);
		                  });
		                  return false;
		              });
				  }
	          });
	      };
	      function closeDialog(options, timer) {
	          if (options.timeOut > 0) {
	              clearTimeout(timer);
	          }
	          $("#" + options.overlayId + ", #" + options.messageHolderId).fadeOut("fast", function () {
	              $("#" + options.overlayId + ", #" + options.messageHolderId).remove();
	          });
	          $(document).unbind("keyup");
	      }
	  })(jQuery);
	  
  	$(function(){
  	  $('a').leaveNotice();
  	});
  </script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> NIST Scan Framework For ARTIQ
          </a>
              <div class="version">
                2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installing the NIST scan framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="scans.html">Creating scan experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="models.html">Using models for data processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="scans_ref.html">Scans references and API docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="models_ref.html">Models reference and API docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysis.html">Curve fitting</a></li>
<li class="toctree-l1"><a class="reference internal" href="applets.html">Applets</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">NIST Scan Framework For ARTIQ</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Installing the NIST scan framework</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/installing.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="installing-the-nist-scan-framework">
<h1>Installing the NIST scan framework<a class="headerlink" href="#installing-the-nist-scan-framework" title="Permalink to this headline">¶</a></h1>
<p>The NIST scan framework runs under ARTIQ version 3.7 and requires Python version 3.5.</p>
<p>First, create a conda environment with Python version 3.5 and ARTIQ version 3.7 installed and activate the
environment.  See <a class="reference external" href="https://m-labs.hk/artiq/manual-release-3/installing.html">installing ARTIQ version 3.7</a> for
further details on installing ARTIQ.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">conda create -n artiq-3.7 artiq=3.7</span>
<span class="go">conda activate artiq-3.7</span>
</pre></div>
</div>
<p>Next, clone the scan_framework repository into a folder that is in your <code class="code docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> and make sure the top level
folder containing the scan_framework source is named <code class="code docutils literal notranslate"><span class="pre">scan_framework</span></code>.</p>
<p>TODO: update github url below</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git clone https://github.com/nist/scan_framework.git /folder/on/pythonpath</span>
</pre></div>
</div>
<p>Finally, create ARTIQ applets to plot data generated by the scan framework.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All scan framework applets are listed in the source code at scan_framework/applet_commands.txt</p>
</div>
<p>In the ARTIQ dashboard, create the current scan applet using the command below.  Scan’s automatically write
all data to the <code class="code docutils literal notranslate"><span class="pre">current_scan</span></code> namespace.  The current scan applet plots this data as a scan is being executed.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span>python -m scan_framework.applets.plot_xy current_scan.plots.y
<span class="go">    --x current_scan.plots.x</span>
<span class="go">    --fit current_scan.plots.fitline</span>
<span class="go">    --title current_scan.plots.plot_title</span>
<span class="go">    --x_scale current_scan.plots.x_scale</span>
<span class="go">    --x_units current_scan.plots.x_units</span>
<span class="go">    --y_scale current_scan.plots.y_scale</span>
<span class="go">    --x_label current_scan.plots.x_label</span>
<span class="go">    --y_units current_scan.plots.y_units</span>
<span class="go">    --y_label current_scan.plots.y_label</span>
<span class="go">    --rid current_scan.rid</span>
<span class="go">    --error current_scan.plots.error</span>
</pre></div>
</div>
<p>In the ARTIQ dashboard, create the current sub-scan applet using the command below.
The current sub-scan applet plots data from 2D scans as they execute.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span>python -m scan_framework.applets.plot_xy current_scan.plots.dim1.y
<span class="go">    --x current_scan.plots.dim1.x</span>
<span class="go">    --fit current_scan.plots.dim1.fitline</span>
<span class="go">    --title current_scan.plots.dim1.plot_title</span>
<span class="go">    --x_scale current_scan.plots.dim1.x_scale</span>
<span class="go">    --x_units current_scan.plots.dim1.x_units</span>
<span class="go">    --x_label current_scan.plots.dim1.x_label</span>
<span class="go">    --y_units current_scan.plots.dim1.y_units</span>
<span class="go">    --y_label current_scan.plots.dim1.y_label</span>
<span class="go">    --trigger current_scan.plots.trigger</span>
<span class="go">    --rid current_scan.rid</span>
<span class="go">    --i_plot current_scan.plots.subplot.i_plot</span>
</pre></div>
</div>
<p>In the ARTIQ dashboard, create the count monitor applet using the command below (optional).
The count monitor applet displays the average measured value at each scan point.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span><span class="o">{</span>artiq_applet<span class="o">}</span>big_number counts
</pre></div>
</div>
<p>In the ARTIQ dashboard, create the current histogram applet (optional).
The current histogram applet plots a histogram of collected data at each scan point as the scan executes.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span>python -m scan_framework.applets.plot_hist current_hist.bins
<span class="go">    --x current_hist.bin_boundaries</span>
<span class="go">    --x_units current_hist.x_units</span>
<span class="go">    --x_label current_hist.x_label</span>
<span class="go">    --plot_title current_hist.plot_title</span>
</pre></div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="introduction.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="scans.html" class="btn btn-neutral float-right" title="Creating scan experiments" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>