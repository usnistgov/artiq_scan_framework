<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Applets &mdash; NIST Scan Framework For ARTIQ 2.0.0 documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Full API documentation for scans" href="api.html" />
    <link rel="prev" title="Scan configuration" href="configuration.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> NIST Scan Framework For ARTIQ
          </a>
              <div class="version">
                2.0.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installing.html">Installing the NIST scan framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scans.html">Creating scan experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models.html">Using models for data processing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../scans_ref.html">Scans references and API docs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="callbacks.html">Callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="methods.html">Methods Available to a Scan</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Scan configuration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Applets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#current-scan-applet">Current scan applet</a></li>
<li class="toctree-l3"><a class="reference internal" href="#count-monitor-applet">Count monitor applet</a></li>
<li class="toctree-l3"><a class="reference internal" href="#current-histogram-applet">Current histogram applet</a></li>
<li class="toctree-l3"><a class="reference internal" href="#current-aggregate-histogram-applet">Current aggregate histogram applet</a></li>
<li class="toctree-l3"><a class="reference internal" href="#current-scan-applet-for-the-artiq-browser">Current scan applet for the ARTIQ browser</a></li>
<li class="toctree-l3"><a class="reference internal" href="#current-sub-scan-applet-for-2d-scans">Current sub-scan applet (for 2D scans)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#current-sub-scan-applet-for-2d-scans-no-fits">Current sub-scan applet (For 2D scans, no fits)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api.html">Full API documentation for scans</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../models_ref.html">Models reference and API docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../analysis.html">Curve fitting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../applets.html">Applets</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NIST Scan Framework For ARTIQ</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../scans_ref.html">Scans references and API docs</a> &raquo;</li>
      <li>Applets</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/scans/applets.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="applets">
<span id="id1"></span><h1>Applets<a class="headerlink" href="#applets" title="Permalink to this headline">¶</a></h1>
<p>There are a few applets that need to be created so that scan data may be plotted.  Each applet uses one of the
applet classes defined in the scan_framework/applets folder.  See the applets documentation for more information about
these applet classes.</p>
<div class="section" id="current-scan-applet">
<span id="id2"></span><h2>Current scan applet<a class="headerlink" href="#current-scan-applet" title="Permalink to this headline">¶</a></h2>
<p>The current scan applet plots the mean values calculated as the scan runs.  Mean values will
be added as data points to the plot after each scan point.  The line of best fit is also
plotted in this applet when fit’s are performed at the end of a scan.</p>
<p>Add the following command to the applets panel in the dashboard to create the current scan applet:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span>python -m scan_framework.applets.plot_xy current_scan.plots.y
<span class="go">    --x current_scan.plots.x</span>
<span class="go">    --fit current_scan.plots.fitline</span>
<span class="go">    --title current_scan.plots.plot_title</span>
<span class="go">    --x_scale current_scan.plots.x_scale</span>
<span class="go">    --x_units current_scan.plots.x_units</span>
<span class="go">    --y_scale current_scan.plots.y_scale</span>
<span class="go">    --x_label current_scan.plots.x_label</span>
<span class="go">    --y_units current_scan.plots.y_units</span>
<span class="go">    --y_label current_scan.plots.y_label</span>
<span class="go">    --rid current_scan.rid</span>
<span class="go">    --error current_scan.plots.error</span>
</pre></div>
</div>
<p>See the <a class="reference internal" href="../models/datasets.html#current-scan-datasets"><span class="std std-ref">Current Scan Datasets</span></a> section for details about each argument/dataset.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">--rid</span></code> argument is optional.  If it is set, the RID of the current scan as prepended to the plot title.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The current scan applet is used for both 1D and 2D scans</p>
</div>
</div>
<div class="section" id="count-monitor-applet">
<span id="id3"></span><h2>Count monitor applet<a class="headerlink" href="#count-monitor-applet" title="Permalink to this headline">¶</a></h2>
<p>The count monitor applet displays the mean of all values returned by the <code class="code docutils literal notranslate"><span class="pre">measure()</span></code> method during
a single  scan point</p>
<p>Add the following command to the applets panel in the dashboard to create the count monitor applet:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span><span class="o">{</span>artiq_applet<span class="o">}</span>big_number counts
</pre></div>
</div>
</div>
<div class="section" id="current-histogram-applet">
<span id="current-hist-applet"></span><h2>Current histogram applet<a class="headerlink" href="#current-histogram-applet" title="Permalink to this headline">¶</a></h2>
<p>The current histogram applet displays a histogram of counts at each scan point as the scan runs.  The histogram will
be updated when a scan point completes.  This is used for realtime monitoring of distributions as the scan runs.</p>
<p>Add the following command to the applets panel in the dashboard to create the current histogram applet:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span>python -m scan_framework.applets.plot_hist current_hist.bins
<span class="go">    --x current_hist.bin_boundaries</span>
<span class="go">    --x_units current_hist.x_units</span>
<span class="go">    --x_label current_hist.x_label</span>
<span class="go">    --plot_title current_hist.plot_title</span>
</pre></div>
</div>
<p>All datasets needed to plot histograms are automatically created and updated by the scan model.</p>
</div>
<div class="section" id="current-aggregate-histogram-applet">
<span id="current-aggregate-hist-applet"></span><h2>Current aggregate histogram applet<a class="headerlink" href="#current-aggregate-histogram-applet" title="Permalink to this headline">¶</a></h2>
<p>The current aggregate histogram applet displays a histogram of counts over all scan points of a scan.
The histogram will be updated when a scan point completes.</p>
<p>Add the following command to the applets panel in the dashboard to create the current aggregate histogram applet:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span>python -m scan_framework.applets.plot_hist current_hist.aggregate_bins
<span class="go">    --x current_hist.bin_boundaries</span>
<span class="go">    --x_units current_hist.x_units</span>
<span class="go">    --x_label current_hist.x_label</span>
<span class="go">    --plot_title current_hist.plot_title</span>
</pre></div>
</div>
<p>All datasets needed to plot aggregate histograms are automatically created and updated by the scan model.</p>
</div>
<div class="section" id="current-scan-applet-for-the-artiq-browser">
<span id="current-scan-browser-applet"></span><h2>Current scan applet for the ARTIQ browser<a class="headerlink" href="#current-scan-applet-for-the-artiq-browser" title="Permalink to this headline">¶</a></h2>
<p>A separate current scan applet is necessary when browsing experiment runs in the ARTIQ browser.
It is identical to the current scan applet above with the <code class="code docutils literal notranslate"><span class="pre">--trigger</span></code> argument set to 1.
This allow the plot to be redrawn when browsing through different experiment runs.</p>
<p>Add the following command to the applets panel in the browser to create the browser current scan applet:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span>python -m scan_framework.applets.plot_xy current_scan.plots.y
<span class="go">--x current_scan.plots.x</span>
<span class="go">--fit current_scan.plots.fitline</span>
<span class="go">--title current_scan.plots.plot_title</span>
<span class="go">--x_scale current_scan.plots.x_scale</span>
<span class="go">--x_units current_scan.plots.x_units</span>
<span class="go">--x_label current_scan.plots.x_label</span>
<span class="go">--y_units current_scan.plots.y_units</span>
<span class="go">--y_label current_scan.plots.y_label</span>
<span class="go">--trigger 1</span>
</pre></div>
</div>
</div>
<div class="section" id="current-sub-scan-applet-for-2d-scans">
<span id="current-sub-scan-applet"></span><h2>Current sub-scan applet (for 2D scans)<a class="headerlink" href="#current-sub-scan-applet-for-2d-scans" title="Permalink to this headline">¶</a></h2>
<p>As a two dimensional scans runs, a fit is performed on each sub-scan when it completes.  Fitted parameter values from
each of these sub-fits are then plotted in the current scan applet.  The current sub-scan applet plot’s the mean values
and fitlines of each sub-scan so the results can be viewed as the scan runs.</p>
<p>Add the following command to the applets panel in the dashboard to create the current sub-scan applet:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span>python -m scan_framework.applets.plot_xy current_scan.plots.dim1.y
<span class="go">    --x current_scan.plots.dim1.x</span>
<span class="go">    --fit current_scan.plots.dim1.fitline</span>
<span class="go">    --title current_scan.plots.dim1.plot_title</span>
<span class="go">    --x_scale current_scan.plots.dim1.x_scale</span>
<span class="go">    --x_units current_scan.plots.dim1.x_units</span>
<span class="go">    --x_label current_scan.plots.dim1.x_label</span>
<span class="go">    --y_units current_scan.plots.dim1.y_units</span>
<span class="go">    --y_label current_scan.plots.dim1.y_label</span>
<span class="go">    --trigger current_scan.plots.trigger</span>
<span class="go">    --rid current_scan.rid</span>
<span class="go">    --i_plot current_scan.plots.subplot.i_plot</span>
</pre></div>
</div>
</div>
<div class="section" id="current-sub-scan-applet-for-2d-scans-no-fits">
<h2>Current sub-scan applet (For 2D scans, no fits)<a class="headerlink" href="#current-sub-scan-applet-for-2d-scans-no-fits" title="Permalink to this headline">¶</a></h2>
<p>If rendering of the current sub-scan applet is slow, a sub-scan plot with no fits can help speed things up:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span>python -m scan_framework.applets.plot_xy current_scan.plots.dim1.y
<span class="go">    --x current_scan.plots.dim1.x</span>
<span class="go">    --title current_scan.plots.dim1.plot_title</span>
<span class="go">    --x_scale current_scan.plots.dim1.x_scale</span>
<span class="go">    --x_units current_scan.plots.dim1.x_units</span>
<span class="go">    --x_label current_scan.plots.dim1.x_label</span>
<span class="go">    --y_units current_scan.plots.dim1.y_units</span>
<span class="go">    --y_label current_scan.plots.dim1.y_label</span>
<span class="go">    --trigger current_scan.plots.trigger</span>
<span class="go">    --rid current_scan.rid</span>
<span class="go">    --i_plot current_scan.plots.subplot.i_plot</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="configuration.html" class="btn btn-neutral float-left" title="Scan configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="api.html" class="btn btn-neutral float-right" title="Full API documentation for scans" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>